<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>replit</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
<style type="text/css">

.container{
   width: 400px;
   height: 225px;
   display: flex;
   justify-content: center;
   align-items: center;
   flex-direction: column;
   gap: 10px;
   border: 1px solid black;
}

.display_image_pos{
  position: fixed;
  left: 2%;
  top: 3%;
  padding: 5px;
}
  
.display_image{

   width: 600px;
   height: 400px;
   border: 1px solid black;
   background-position: center;
   background-size: cover;
}

.title{

position: fixed;
left: 45%;
top: 3%;

padding: 10px;

}

.description{

  display:flex;
  flex-direction:column;
  position: fixed;
  left: 45%;
  top: 20%;
  
  padding: 10px;
}

.descriptionbox{
  width: 450px;
  height: 200px;
}


.price{

  
  padding: 10px;
  position: fixed;
 
  right: 2%;
  top: 5%;

}



.cat {
  width: 150px;
  height: 75px;
  background-color: #3498DB;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.cat:hover, .cat:focus {
  background-color: #2980B9;
}

.category {
  
  display: inline-block;

  position: fixed;
  right: 2%;
  top: 15%;
 
}

.category-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  overflow: auto;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.category-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align:center
}

.category a:hover {background-color: #ddd;}

.show {display: block;}

.submit{
  width: 150px;
  height: 75px;
  background-color: #3498DB;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
  position: fixed;
  right: 2%;
  bottom: 15%;
}

  .submit:hover, .cat:focus {
  background-color: #2980B9;
}



</style >

<body>

  
<div class = "display_image_pos">
<input type="file" id ="image_input" name="uploadImage" accept="image/png,image/jpg">

<div class = "display_image" id="display_image"> </div>

</div>

<div class ="title">
  <label for="title">Title:</label>
  <input  type="text" id="title" name="uploadTitle" required minlength="4" maxlength="8" size="16" ></input>
</div>



<div class ="description">
  <label  for="description">Description:</label>
  <textarea class ="descriptionbox"  type="text" id="description" name="uploadDescription" required minlength="10" maxlength="500" ></textarea>
</div>


<div class ="price">
  <label for="price">Price:</label>
  <input  type="text" id="price" name="uploadPrice" required minlength="5" maxlength="5" size="10"></input>
</div>

<div class="category">
  <!--  <label for="category">Category:</label> -->
	<select class = "cat" id="category" name="uploadCategory">
		<option value="">Category</option>
		<option value="cat1">Category1</option>
		<option value="cat2">Category2</option>
		<option value="cat3">Category3</option>
		<option value="cat4">Category4</option>
	</select>
</div>



  
<button class = "submit" id = submit name= "submit">submit</button>


<script>
let FileInput = document.getElementById("image_input");
let TitleInput = document.getElementById("title");
let DescriptionInput = document.getElementById("description");
let PriceInput = document.getElementById("price");
let CategoryInput = document.getElementById("category");

let button = document.getElementById("submit");

button.addEventListener("click", function() {
	let uploaditem = {  //create upload item 
		picture: FileInput.value,
		title: TitleInput.value,
    description:  DescriptionInput.value,
    price: parseFloat(PriceInput.value),
    category: Category.value,
	}
	console.log(uploaditem);

	fetch("/upload", {
		method: "POST",
		headers: {
			"Content-Type": "application/json",
		},
	}).then(function (response) {
		console.log(response.status);
	}).catch(function (error) {
		console.log(error);
	});

});

const image_input = document.querySelector("#image_input"); //get image input
var image = "";

image_input.addEventListener("change", function()  
{
   const reader = new FileReader(); //use file reader object to read file
   reader.addEventListener("load", () => //add event listener load
   {
     image = reader.result; //set global variable to uploaded file in reader
     document.querySelector("#display_image").style.backgroundImage = `url(${image})`; //set display_image element to uploaded image 
    });
   reader.readAsDataURL(this.files[0]);
});

</script>



<script src="upload.js"></script>


</body>
</html>
